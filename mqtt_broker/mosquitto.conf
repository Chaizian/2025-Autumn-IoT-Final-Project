# =================================================================
# Mosquitto MQTT Broker 配置文件 (开发环境推荐)
# =================================================================

# 1. 监听设置 (Listener)
# -----------------------------------------------------------------
# 默认情况下，Mosquitto 2.0+ 仅绑定到 localhost (127.0.0.1)。
# 为了让局域网内的其他电脑（如发布端 Laptop）能连接到这里，
# 必须显式指定监听端口和 IP (127.0.0.1 表示仅限本机)。
listener 1883 127.0.0.1

# 2. 认证设置 (Authentication)
# -----------------------------------------------------------------
# 默认情况下，Mosquitto 2.0+ 禁止匿名登录。
# 为了方便开发和演示，这里设置为 true，允许无密码连接。
# 生产环境请务必设置为 false 并配置 password_file。
allow_anonymous true

# 3. 持久化设置 (Persistence)
# -----------------------------------------------------------------
# 将消息保存到磁盘，防止服务重启导致数据丢失。
persistence true
persistence_file mosquitto.db
# 注意：确保 mosquitto 运行的目录下有这个文件夹，或者修改为绝对路径
persistence_location ./mosquitto_data/

# 4. 日志设置 (Logging)
# -----------------------------------------------------------------
# 将日志输出到控制台，方便调试看到谁连接了、发了什么消息。
log_dest stdout
# 记录连接、断开、发布、订阅等信息
log_type all

# =================================================================
# 常用命令备忘:
# 启动: mosquitto -c mosquitto.conf -v
# =================================================================
